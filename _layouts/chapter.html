---
# Layout for Novel Chapters
layout: default
---
<script type="application/ld+json">
  {
    "@context": "https://schema.org/",
    "@type": "BreadcrumbList",
    "itemListElement": [{
      "@type": "ListItem",
      "position": 0,
      "name": "{{ site.title }}",
      "item": "{{ "/" | absolute_url }}"
    }, {
      "@type": "ListItem",
      "position": 1,
      "name": "Volume {{ page.book.number }}: {{ page.book.title }}",
      "item": "{{ page.book.url | absolute_url }}"
    }, {
      "@type": "ListItem",
      "position": 2,
      "name": "Chapter {{ page.chapter }}: {{ page.title }}",
      "item": "{{ page.url | absolute_url }}"
    }]
  }
</script>
{% if page.previous_chapter %}
  {% assign previous_chapter_number = page.previous_chapter%}
{% else %}
  {% assign previous_chapter_number = page.chapter | plus: -1 %}
{% endif %}
{% if page.next_chapter %}
  {% assign next_chapter_number = page.next_chapter %}
{% else %}
  {% assign next_chapter_number = page.chapter | plus: 1 %}
{% endif %}
{% assign pages = site.pages | where: "type", "chapter" | where: "book.series", page.book.series %}
{% assign previous_pages = pages | where: "chapter", previous_chapter_number %}
{% assign next_pages = pages | where: "chapter", next_chapter_number %}

{% for page in previous_pages %}
<link rel="prerender" href="{{ page.url }}">
{% endfor %}

{% for page in next_pages %}
{% if jekyll.environment != "unpublished" and page.published == "sponsors" %}{% break %}{% endif %}
<link rel="prerender" href="{{ page.url }}">
{% endfor %}

<style>
  h1::before {
{% if page.current_chapters %}
  content: 'Chapter {% if page.book %}{{ page.book.number }}-{% endif %}{{ page.current_chapters }}: ';
{% else %}
  content: 'Chapter {% if page.book %}{{ page.book.number }}-{% endif %}{{ page.chapter }}: ';
{% endif %}
    display: block;
  }

{% for page in previous_pages %}
  .previous::before {
    content: 'Previous Chapter: {% if page.book %}{{ page.book.number }}-{% endif %}{{ page.chapter }}: ';
    display: block;
  }
{% endfor %}

{% for page in next_pages %}
  .next::before {
    content: 'Next Chapter: {% if page.book %}{{ page.book.number }}-{% endif %}{{ page.chapter }}: ';
    display: block;
  }
{% endfor %}
</style>

<div>
  <header>
    <script type="application/ld+json">
    {
      "@context": {
        "rdfa": "http://www.w3.org/ns/rdfa#",
        "schema": "http://schema.org/",
        "cd": "{{ "/" | absolute_url }}"
      },
      "@graph": [
        {% if page.author %}{% 
          assign author = site.data.staff | where: "id", page.author | last %}
        {
          "@id": "{{ author.url }}",
          "@type": "schema:Person",
          "schema:name": "{{ author.name }}",
          "schema:url": "{{ author.url }}"
        },{% endif %}
        {% if page.editor %}{% 
          for editor in page.editor %}{% 
            assign editor = site.data.staff | where: "id", page.editor | last %}
        {
          "@id": "{{ editor.url }}",
          "@type": "schema:Person",
          "schema:name": "{{ editor.name }}",
          "schema:url": "{{ editor.url }}"
        },{% endfor %}{% endif %}
        {
          "@id": "{{ page.book.url | absolute_url }}",
          "@type": "schema:Book",
          "schema:url": "{{ page.book.url | absolute_url }}",
          "schema:name": "{{ site.title }} {{ page.book.number }}: {{ page.book.title }}",
          "schema:position": "{{ page.book.number }}",
          "schema:copyrightYear": "{{ page.book.copyrightYear }}",
          "schema:inLanguage": "{{ page.lang }}"{% if page.author %}{% 
            assign author = site.data.staff | where: "id", page.author | last %},
          "schema:author": {
            "@id": "{{ author.url }}"
          },
          "schema:publisher": {
            "@id": "{{ author.url }}"
          }{% endif %}{% if page.book.genres %},
          "schema:genre": {{ page.book.genres | jsonify }}{% endif %}
        },{% assign characters = page.characters.main %}{% 
          if page.characters.secondary %}{% 
            assign characters = characters | concat: page.characters.secondary %}{%
          endif %}{% if page.characters.tertitary %}{%
            assign characters = characters | concat: page.characters.tertitary %}{%
          endif %}{%
          for character in characters %}{% 
            assign character_string = character | strip | append: "-latest" %}{% 
            assign db_character = site.data.characters[character_string] %}{% unless db_character%}{% continue %}{% endunless %}
        {
          "@id": "{% if db_character.url %}{{ db_character.url }}{% else %}_:{{ character_string}}{% endif %}",
          "@type": "schema:Person",
          "additionalType": "cd:Character",
          "schema:name": "{{ db_character.name }}",
          "schema:gender": {
            "@type": "{{ db_character.gender | absolute_url }}",
            "@value": "{{ db_character.gender | split: "/" | last }}"
          }{% if db_character.url %},
          "schema:url": "{{ db_character.url }}"{% endif %}
        },{% endfor %}
        {
          "@id": "{{ page.url | absolute_url }}",
          "@type": "schema:Chapter",
          "schema:isPartOf": { "@id": "{{ page.book.url | absolute_url }}" },
          "schema:name": "{{ page.book.number }}-{{ page.chapter }}: {{ page.title }}",
          "schema:url": "{{ page.url | absolute_url }}",
          "schema:datePublished": "{{ page.date | date: "%Y-%m-%d" }}",
          "schema:dateModified": "{% last_modified_at %Y-%m-%d %}",{% 
            assign author = site.data.staff | where: "id", page.author | last %}
          "schema:author": { "@id": "author.url" },{% if page.editor %}
          "schema:editor": [{% for editor in page.editor %}{% 
            assign editor = site.data.staff | where: "id", page.editor | last %}
            {"@id": "{{ editor.url }}"}{% unless forloop.last %},{% endunless %}{% endfor %}
          ],{% endif %}{%if page.sponsors %}
          "schema:sponsor": [{% for sponsor in page.sponsors %}
            {
              "@type": "schema:Person",
              "schema:name": "{{ sponsor }}
            }{% unless forloop.last %},{% endunless %}{% endfor %}
          ],{% endif %}
          "schema:character": [{%
            for character in characters %}{% 
              assign character_string = character | strip | append: "-latest" %}{% 
              assign db_character = site.data.characters[character_string] %}{% unless db_character%}{% continue %}{% endunless %}
            { "@id": "{% if db_character.url %}{{ db_character.url }}{% else %}_:{{ character_string}}{% endif %}" }{% unless forloop.last %},{% endunless %}{% endfor %}
          ]{% if page.location %},
          "schema:contentLocation": [ {% for location in page.location %}
            {
              "@type": "schema:Location",
              "name": "{{ site.data.locations[location].name }}"
            }{% unless forloop.last%},{% endunless %}{% endfor %}
          ]{% endif %}
        }
      ]
    }
    </script>
    <h1 aria-label="Chapter {% if page.book %}{{ page.book.number }}-{% endif %}{{ page.chapter }}: {{ page.title }}" aria-flowto="chapter-content">
      {{ page.title }}</h1>
    <small class="float-left">
      published on {{ page.date | date: "%Y-%m-%d" }}, last updated on {% last_modified_at %Y-%m-%d %}
    </small>
    <small class="float-right">
{% if page.author %}{% 
  assign author = site.data.staff | where: "id", page.author | last %}
  <span>
    written by {% if author.url %}<a href="{{ author.url }}" target="_blank" ref="noopener nofollow">{% endif %}
    {{ author.name }}
    {% if author.url %}</a>{% endif %}
{% endif %}{% 
if page.editor %}, edited by {%
  for e in page.editor %}{% 
    assign editor = site.data.staff | where: "id", e | last
%}{% 
    if editor.url
%}<a href="{{ editor.url }}" target="_blank" ref="noopener nofollow">{% 
    endif 
%}{{ editor.name }}{% 
    if editor.url %}</a>{% endif %}{% 
    unless forloop.last %} and {% endunless %}{% 
  endfor %}{% 
  if page.sponsors %}, sponsored by {% 
    for sponsor in page.sponsors %}{{ sponsor }}{%
      unless forloop.last %}, {% endunless %}{% 
    endfor %}{% 
  endif %}{%
endif %}</small>
    <div class="clearfix"></div>
    {% assign words = content | markdownify | strip_html | split: " " | size %}
{% if words > 200 %}
    <nav class="d-flex w-100">
      {% for page in previous_pages %}
      <a class="btn btn-lg btn-primary previous" title=" {{ page.title }}" href="{{ page.url }}">{{ page.title }}</a>
      {% endfor %}

      {% for page in next_pages %}
      {% if jekyll.environment != "unpublished" and page.published == "pre-sponsors" %}
      {% break %}
      {% elsif jekyll.environment != "unpublished" and page.published == "sponsors" %}
      <a class="btn btn-lg btn-primary next early-access" title="{{ site.patreon.title }}"
        href="{{ site.patreon.url }}" rel="payment">
       <span>
          <svg viewBox="0 0 569 546" xmlns="http://www.w3.org/2000/svg" class="patreon-logo">
          <g>
          <circle cx="362.589996" cy="204.589996" data-fill="1" id="Oval" r="204.589996"></circle>
          <rect data-fill="2" height="545.799988" id="Rectangle" width="100" x="0" y="0"></rect>
          </g>
        </svg>
        </span>
        <span>{{ site.patreon.title }}</span>
      </a>
      {% else %}
      <a class="btn btn-lg btn-primary next" title="{{ page.title }}" href="{{ page.url }}">{{ page.title }}</a>
      {% endif %}
      {% endfor %}
    </nav>
{% endif %}
    <div class="clearfix"></div>
  </header>
  <section class="hyphenate" property="text" aria-flowto="navigation" id="chapter-content">
    <!--sse-->
    {% include linkify content=content %}
    <!--/sse-->
  </section>
  <footer>
    <nav class="d-flex w-100" id="navigation" aria-flowto="comments">
      {% for page in previous_pages %}
      <a class="btn btn-lg btn-primary previous" title=" {{ page.title }}" href="{{ page.url }}">{{ page.title }}</a>
      {% endfor %}

      {% for page in next_pages %}
      {% if jekyll.environment != "unpublished" and page.published == "pre-sponsors" %}
      {% break %}
      {% elsif jekyll.environment != "unpublished" and page.published == "sponsors" %}<a class="btn btn-lg btn-primary next early-access" title="{{ site.patreon.title }}"
      href="{{ site.patreon.url }}" rel="payment">
     <span>
        <svg viewBox="0 0 569 546" xmlns="http://www.w3.org/2000/svg" class="patreon-logo">
        <g>
        <circle cx="362.589996" cy="204.589996" data-fill="1" id="Oval" r="204.589996"></circle>
        <rect data-fill="2" height="545.799988" id="Rectangle" width="100" x="0" y="0"></rect>
        </g>
      </svg>
      </span>
      <span>{{ site.patreon.title }}</span>
    </a>
      {% else %}
      <a class="btn btn-lg btn-primary next" title="{{ page.title }}" href="{{ page.url }}">{{ page.title }}</a>
      {% endif %}
      {% endfor %}
    </nav>
    <div class="clearfix"></div>
    <hr>

    <aside class="social">
      <p>
        Share this page on
      </p>
      <div class="icons">
        <a title="Share Chapter on Facebook"
          href="https://www.facebook.com/sharer.php?src=bm&u={{ page.url | absolute_url }}&t={{ site.title | url_encode }}%20Chapter%20{{ page.book.number }}-{{ page.chapter }}%3A%20{{ page.title | url_encode }}"
          target="_blank" rel="noopener nofollow">
          <img src="/assets/images/facebook.png" alt="Share Chapter on Facebook">
        </a>
        <a title="Share Chapter on Twitter"
          href="https://twitter.com/intent/tweet?url={{ page.url | absolute_url }}&text={{ site.title | url_encode }}%20Chapter%20{{ page.book.number }}-{{ page.chapter }}%3A%20{{ site.title | url_encode }}%20{{ page.title | url_encode }}&via={{ site.twitter.username }}&hashtags=Fantasy,WebFiction,WebNovel,WebSerial"
          target="_blank" rel="noopener nofollow">
          <img src="/assets/images/twitter.png" alt="Share Chapter on Twitter">
        </a>
        <a title="Share Chapter on reddit"
          href="https://reddit.com/submit?url={{ page.url | absolute_url }}&title={{ site.title | url_encode }}%20Chapter%20{{ page.book.number }}-{{ page.chapter }}%3A%20{{ page.title | url_encode }}"
          target="_blank" rel="noopener nofollow">
          <img src="/assets/images/reddit.png" alt="Share Chapter on reddit">
        </a>
        <a title="Share Chapter on Pinterest"
          href="https://pinterest.com/pin/create/button/?url={{ page.url | absolute_url }}&description={{ site.title | url_encode }}%20Chapter%20{{ page.book.number }}-{{ page.chapter }}%3A%20{{ page.title | url_encode }}&media={{ "/assets/images/site-card.png" | absolute_url }}"
          target="_blank" rel="noopener nofollow">
          <img src="/assets/images/pinterest.png" alt="Share Chapter on Pinterest">
        </a>
        <a title="Share Chapter on Telegram"
          href="https://telegram.me/share/url?url={{ page.url | absolute_url }}&text={{ site.title | url_encode }}%20Chapter%20{{ page.book.number }}-{{ page.chapter }}%3A%20{{ page.title | url_encode }}"
          target="_blank" rel="noopener nofollow">
          <img src="/assets/images/telegram.png" alt="Share Chapter on Telegram">
        </a>
        <a title="Share Chapter on WhatsApp"
          href="https://api.whatsapp.com/send?text=Checkout%20{{ site.title | url_encode }}%20Chapter%20{{ page.book.number }}-{{ page.chapter }}%3A%20{{ page.title | url_encode }}.%20{{ page.url | absolute_url }}"
          target="_blank" rel="noopener nofollow">
          <img src="/assets/images/whatsapp.png" alt="Share Chapter on WhatsApp">
        </a>
        <a title="Share Chapter on Tumblr"
          href="https://www.tumblr.com/widgets/share/tool?canonicalUrl={{ page.url | absolute_url }}&title=Chapter%20{{ page.book.number }}-{{ page.chapter }}%3A%20{{ page.title | url_encode }}&tags={{ site.title | replace: " ", "" }},WebFiction,WebNovel,WebSerial,Fantasy"
          target="_blank" rel="noopener nofollow">
          <img src="/assets/images/tumblr.png" alt="Share Chapter on Tumblr">
        </a>
        <a title="Share Chapter on VK" href="https://vk.com/share.php?url={{ page.url | absolute_url }}" target="_blank"
          rel="noopener nofollow">
          <img src="/assets/images/vk.png" alt="Share Chapter on VK">
        </a>
        <a title="Share Chapter on Pocket" href="https://getpocket.com/edit?url={{ page.url | absolute_url }}"
          target="_blank" rel="noopener nofollow">
          <img src="/assets/images/pocket.png" alt="Share Chapter on Pocket">
        </a>
        <a title="Share Chapter on Mix" href="https://mix.com/mixit?su=submit&url={{ page.url | absolute_url }}"
          target="_blank" rel="noopener nofollow">
          <img src="/assets/images/mix.png" alt="Share Chapter on Mix">
        </a>
      </div>
    </aside>
  </footer>
</div>
<script>
  var Hyphenopoly = {
    require: {
      "en-ca": "Supercalifragilisticexpialidocious"
    }
  };
</script>

<div id="player-and-voices" style="display:none"></div>
