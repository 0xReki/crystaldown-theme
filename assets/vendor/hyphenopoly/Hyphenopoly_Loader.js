/*
 Hyphenopoly_Loader 3.3.0 - client side hyphenation
 ©2019  Mathias Nater, Zürich (mathiasnater at gmail dot com)
 https://github.com/mnater/Hyphenopoly

 Released under the MIT license
 http://mnater.github.io/Hyphenopoly/LICENSE
*/
(function(k,h,a,l){function m(a,d){l.keys(a).forEach(d)}function y(){if("object"===typeof n&&"function"===typeof n.Instance)try{var a=new n.Module(Uint8Array.from([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,5,1,1,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]));return 0!==(new n.Instance(a)).exports.t(4)}catch(d){}return!1}function v(c,d){var e=h.createElement("script");e.src=c+d;"hyphenEngine.asm.js"===d&&e.addEventListener("load",function(){a.events.dispatch("engineLoaded",
{msg:"asm"})});h.head.appendChild(e)}function w(c,d,e,g){function b(f,b,c,d){k.fetch(f+b,{credentials:"include"}).then(function(q){if(q.ok)if("hyphenEngine"===c)a.bins.set(c,q.arrayBuffer().then(function(a){return new n.Module(a)})),a.events.dispatch("engineLoaded",{msg:d});else{var e=p.get(b);e.forEach(function(f){a.bins.set(f,1<e.length?q.clone().arrayBuffer():q.arrayBuffer());a.events.dispatch("hpbLoaded",{msg:f})})}else a.events.dispatch("loadError",{file:b,msg:d,name:c,path:f})})}function f(f,
b,c,d){var e=new XMLHttpRequest;e.onload=function(){200===e.status?p.get(b).forEach(function(f){a.bins.set(f,e.response);a.events.dispatch("hpbLoaded",{msg:f})}):a.events.dispatch("loadError",{file:b,msg:d,name:c,path:f})};e.open("GET",f+b);e.responseType="arraybuffer";e.send()}p.has(d)?"hyphenEngine"!==e&&p.get(d).push(g):(p.set(d,[g]),a.cf.wasm?b(c,d,e,g):f(c,d,e,g))}function x(){a.setup.hide.match(/^(?:element|text)$/)&&a.toggle("off");a.events.dispatch("contentLoaded",{msg:["contentLoaded"]})}
var t=sessionStorage,n=k.WebAssembly,r=new Map,u=new Map;a.cacheFeatureTests&&t.getItem("Hyphenopoly_Loader")?a.cf=JSON.parse(t.getItem("Hyphenopoly_Loader")):a.cf={langs:l.create(null),polyfill:!1,wasm:null};(function(){var c=h.currentScript?h.currentScript.src.replace(/Hyphenopoly_Loader.js/i,""):"../",d=c+"patterns/";a.paths?(a.paths.maindir=a.paths.maindir||c,a.paths.patterndir=a.paths.patterndir||d):a.paths=l.create({maindir:c,patterndir:d})})();a.setup?(a.setup.selectors=a.setup.selectors||
{".hyphenate":{}},a.setup.timeout=a.setup.timeout||1E3,a.setup.hide=a.setup.hide||"all"):a.setup={hide:"all",selectors:{".hyphenate":{}},timeout:1E3};(function(){m(a.require,function(c){u.set(c.toLowerCase(),a.require[c])});a.fallbacks&&m(a.fallbacks,function(c){r.set(c.toLowerCase(),a.fallbacks[c].toLowerCase())})})();a.toggle=function(c){if("on"===c)(c=h.getElementById("H9Y_Styles"))&&c.parentNode.removeChild(c);else{c=h.createElement("style");var d="";c.id="H9Y_Styles";switch(a.setup.hide){case "all":d=
"html {visibility: hidden !important}\n";break;case "element":m(a.setup.selectors,function(a){d+=a+" {visibility: hidden !important}\n"});break;case "text":m(a.setup.selectors,function(a){d+=a+" {color: transparent !important}\n"})}c.appendChild(h.createTextNode(d));h.head.appendChild(c)}};(function(){function c(a,b,c){e.set(a,{cancellable:c,"default":b,register:[]})}function d(f,c,d){e.has(f)?e.get(f).register.push(c):d?b.push({handler:c,name:f}):a.events.dispatch("error",{lvl:"warn",msg:'unknown Event "'+
f+'" discarded'})}var e=new Map,g=[],b=[];c("timeout",function(f){a.toggle("on");k.console.info("Hyphenopolys 'FOUHC'-prevention timed out after %dms",f.delay)},!1);c("error",function(a){switch(a.lvl){case "info":k.console.info(a.msg);break;case "warn":k.console.warn(a.msg);break;default:k.console.error(a.msg)}},!0);c("contentLoaded",function(a){g.push({data:a,name:"contentLoaded"})},!1);c("engineLoaded",function(a){g.push({data:a,name:"engineLoaded"})},!1);c("hpbLoaded",function(a){g.push({data:a,
name:"hpbLoaded"})},!1);c("loadError",function(a){g.push({data:a,name:"loadError"})},!1);c("tearDown",null,!0);a.handleEvent&&m(a.handleEvent,function(b){d(b,a.handleEvent[b],!0)});a.events=l.create(null);a.events.deferred=g;a.events.tempRegister=b;a.events.dispatch=function(a,b){b=b||l.create(null);var c=!1;e.get(a).register.forEach(function(f){b.preventDefault=function(){e.get(a).cancellable&&(c=!0)};f(b)});!c&&e.get(a)["default"]&&e.get(a)["default"](b)};a.events.define=c;a.events.addListener=
d})();var p=new Map;(function(){function c(b){a.hyphenators=a.hyphenators||l.create(null);a.hyphenators[b]||(k.Promise?(a.hyphenators[b]=new Promise(function(c,d){a.events.addListener("engineReady",function(f){f.msg===b&&c(a.createHyphenator(f.msg))},!0);a.events.addListener("loadError",function(a){a.name!==b&&"hyphenEngine"!==a.name||d(Error("File "+a.file+" can't be loaded from "+a.path))},!1)}),a.hyphenators[b]["catch"](function(b){a.events.dispatch("error",{lvl:"error",msg:b.message})})):a.hyphenators[b]=
{then:function(){a.events.dispatch("error",{msg:"Promises not supported in this engine. Use a polyfill."})}})}function d(b){var c=b+".hpb",d=b;a.cf.polyfill=!0;a.cf.langs[b]="H9Y";r&&r.has(b)&&(d=r.get(b),c=d+".hpb");a.bins=a.bins||new Map;w(a.paths.patterndir,c,d,b)}var e=function(){var b=null;return{append:function(a){return b?(a.appendChild(b),b):null},clear:function(){b&&b.parentNode.removeChild(b)},create:function(c){if(!a.cf.langs[c]){b=b||h.createElement("body");var d=h.createElement("div");
d.lang=c;d.style.cssText="visibility:hidden;-moz-hyphens:auto;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;width:48px;font-size:12px;line-height:12px;border:none;padding:0;word-wrap:normal";d.appendChild(h.createTextNode(u.get(c).toLowerCase()));b.appendChild(d)}}}}();null===a.cf.wasm&&(a.cf.wasm=y());u.forEach(function(b,c){"FORCEHYPHENOPOLY"===b||a.cf.langs[c]&&"H9Y"===a.cf.langs[c]?d(c):e.create(c)});var g=e.append(h.documentElement);null!==g&&(g=g.querySelectorAll("div"),Array.prototype.forEach.call(g,
function(b){("auto"===b.style.hyphens||"auto"===b.style.webkitHyphens||"auto"===b.style.msHyphens||"auto"===b.style["-moz-hyphens"])&&12<b.offsetHeight?a.cf.langs[b.lang]="CSS":d(b.lang)}),e.clear());a.cf.polyfill&&(v(a.paths.maindir,"Hyphenopoly.js"),a.cf.wasm?w(a.paths.maindir,"hyphenEngine.wasm","hyphenEngine","wasm"):v(a.paths.maindir,"hyphenEngine.asm.js"),m(a.cf.langs,function(b){if("H9Y"===a.cf.langs[b]){var d=(new Map([["de",54],["hu",205],["nb-no",91],["nl",41]])).get(b)||32;a.specMems=a.specMems||
new Map;a.cf.wasm?a.specMems.set(b,new n.Memory({initial:d,maximum:256})):a.specMems.set(b,new ArrayBuffer(2<<Math.floor(Math.log(d)*Math.LOG2E)<<16));c(b)}}))})();a.cf.polyfill?("all"===a.setup.hide&&a.toggle("off"),"none"!==a.setup.hide&&(a.setup.timeOutHandler=k.setTimeout(function(){a.toggle("on");a.events.dispatch("timeout",{delay:a.setup.timeout})},a.setup.timeout)),"loading"===h.readyState?h.addEventListener("DOMContentLoaded",x,{once:!0,passive:!0}):x()):(a.events.dispatch("tearDown",{}),
k.Hyphenopoly=null);a.cacheFeatureTests&&t.setItem("Hyphenopoly_Loader",JSON.stringify(a.cf))})(window,document,Hyphenopoly,Object);